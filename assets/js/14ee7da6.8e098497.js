"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[836],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=p(n),u=r,h=m["".concat(s,".").concat(u)]||m[u]||c[u]||o;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5663:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return d},default:function(){return m}});var a=n(3117),r=n(102),o=(n(7294),n(3905)),i=["components"],l={},s="Governance Deep Dive",p={unversionedId:"calamari/GovernanceDeepdive",id:"calamari/GovernanceDeepdive",title:"Governance Deep Dive",description:"This doc is a more technical dive into how governance on Calamari operates.",source:"@site/docs/calamari/GovernanceDeepdive.md",sourceDirName:"calamari",slug:"/calamari/GovernanceDeepdive",permalink:"/docs/calamari/GovernanceDeepdive",editUrl:"https://github.com/Manta-Network/docs/edit/main/docs/calamari/GovernanceDeepdive.md",tags:[],version:"current",frontMatter:{}},d=[{value:"Concepts to know",id:"concepts-to-know",children:[],level:2},{value:"System Actors",id:"system-actors",children:[],level:2},{value:"Launch Phase",id:"launch-phase",children:[{value:"1. Public token holder proposals",id:"1-public-token-holder-proposals",children:[],level:3},{value:"2. Council motions",id:"2-council-motions",children:[],level:3}],level:2},{value:"Voting Phase",id:"voting-phase",children:[],level:2},{value:"Enactment Phase",id:"enactment-phase",children:[],level:2},{value:"The Treasury",id:"the-treasury",children:[],level:2},{value:"API Reference",id:"api-reference",children:[],level:2}],c={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"governance-deep-dive"},"Governance Deep Dive"),(0,o.kt)("p",null,"This doc is a more technical dive into how governance on Calamari operates.\nCalamari is built on Polkadot and Substrate; the governance system is\ndirectly inspired by what Polkadot uses. One of the main differences is that\nour Council manages its own membership."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Note: not everything documented here is released yet. Check our\n",(0,o.kt)("a",{parentName:"em",href:"https://emphasized-seed-161.notion.site/3b1b61e0aee8484396d674f4653e0813?v=451a4ad2105d4f9cb35fb74680359c1d"},"roadmap"),"\nfor the up to date status of features.")),(0,o.kt)("h2",{id:"concepts-to-know"},"Concepts to know"),(0,o.kt)("p",null,"If you're reading this doc we're assuming you know what an\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.substrate.io/v3/concepts/extrinsics/"},"extrinsic")," is, and that\nyou're generally familiar with\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.substrate.io/v3/concepts/runtime/"},"how Substrate runtimes work"),"."),(0,o.kt)("h2",{id:"system-actors"},"System Actors"),(0,o.kt)("p",null,"There are three kinds of actors that can participate in governance\non Calamari: ",(0,o.kt)("em",{parentName:"p"},"Public Token Holders, the _Council"),", and the ",(0,o.kt)("em",{parentName:"p"},"Technical Committee"),".\nThey all have a different set of extrinsics they are allowed to submit to the chain."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"Public Token Holders")," are everyone who owns a Calamari token. They can use\ntheir stake to second proposals that are trying to become referendums, and\nvote on referendums, proportional to the amount of stake they have."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"Council")," represents passive token holders and exists because democratic\nsystems usually have issues with low voter turnout. There are three council\nmembers, and their responsibility is to submit common sense proposals for the\nregular development and maintenance of the system. In our case, the Council is\nalso responsible for bootstrapping the Manta Network and is thus made up of\nmembers of the Manta Core Development Team. The Council manages the membership\nof the Technical Committee."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"Technical Committee")," is responsible for handling emergencies. They\nhave the ability to fast track all three periods, and how much the periods\nare shortened depends on how many committee members believe the action is necessary.\nUnanimous agreement is required for instantaneous changes. There are three\ntechnical committee members, and they are also part of the Manta Core\nDevelopment Team."),(0,o.kt)("h2",{id:"launch-phase"},"Launch Phase"),(0,o.kt)("p",null,"The process of submitting a proposal starts out by getting the preimage hash\nof the proposal, in order to verify that it doesn't change at any point during\nthe process. "),(0,o.kt)("p",null,"There are two ways to submit a proposal, and the launch periods alternate\nbetween the two methods."),(0,o.kt)("h3",{id:"1-public-token-holder-proposals"},"1. Public token holder proposals"),(0,o.kt)("p",null,"Public token holders can submit a preimage hash using the\n",(0,o.kt)("inlineCode",{parentName:"p"},"democracy.externalProposeDefault()")," extrinsic. These proposals all go\ninto the ",(0,o.kt)("inlineCode",{parentName:"p"},"public proposal queue"),". Then stakeholders can second proposals,\nand the proposal with the most stake backing it at the end of the period\nis promoted to a referendum."),(0,o.kt)("h3",{id:"2-council-motions"},"2. Council motions"),(0,o.kt)("p",null,'The council can create "council motions" also called "external proposals".\nThey can submit the preimage hash using three methods,'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"democracy.externalPropose()")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"democracy.externalProposeMajority()")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"democracy.externalProposeDefault()"))),(0,o.kt)("p",null,"which have differences in voting thresholds that we'll cover in the ",(0,o.kt)("a",{parentName:"p",href:"#voting-phase"},"Voting Phase"),"\nsection below. The council votes on the proposal internally, with one vote per\ncouncil member, and if it passes, the proposal moves to the ",(0,o.kt)("inlineCode",{parentName:"p"},"external propose queue"),"\nwhere it waits for the end of the period and is automatically promoted to a referendum."),(0,o.kt)("p",null,"We only promote one proposal at a time to avoid the situation where two opposing\nproposals pass simultaneously. "),(0,o.kt)("p",null,"During this period, the Technical Committee has the ability to cancel any proposal\nand fast track proposals made using the ",(0,o.kt)("inlineCode",{parentName:"p"},"democracy.externalPropose()")," or\n",(0,o.kt)("inlineCode",{parentName:"p"},"democracy.externalProposeDefault()")," extrinsics."),(0,o.kt)("h2",{id:"voting-phase"},"Voting Phase"),(0,o.kt)("p",null,"At the start of the Voting Period a referendum has been tabled either from the\nexternal proposal queue or the public proposal queue. Now token holders have\nthe opportunity to vote on the referendum with an ",(0,o.kt)("inlineCode",{parentName:"p"},"aye")," to pass or ",(0,o.kt)("inlineCode",{parentName:"p"},"nay")," to\nreject."),(0,o.kt)("p",null,"The percent of ayes needed for a referendum to pass depends on the extrinsic\nused to submit the proposal, and varies based on voter turnout using a method\ncalled ",(0,o.kt)("strong",{parentName:"p"},"Adaptive Quorum Biasing"),". The idea is to anticipate that in practice\nvoter turnout is not ",(0,o.kt)("inlineCode",{parentName:"p"},"100%"),", and that different proposals will have varying\nlevels of contentiousness and trustworthiness."),(0,o.kt)("p",null,"If a ",(0,o.kt)("strong",{parentName:"p"},"positive turnout bias")," is applied, then a super-majority threshold is\nrequired to ",(0,o.kt)("em",{parentName:"p"},"pass")," at low levels of turnout, and the threshold decreases as\nturnout increases. On the other hand applying a ",(0,o.kt)("strong",{parentName:"p"},"negative turnout bias")," means\nthat a super majority is needed to ",(0,o.kt)("em",{parentName:"p"},"reject")," at low levels of turnout, and the\nthreshold increases as turnout increases. In all cases these biasings work out\nso that if ",(0,o.kt)("inlineCode",{parentName:"p"},"51%")," of the total stake votes in one direction (a simple majority),\nthen that choice is executed."),(0,o.kt)("p",null,"Now let's look at the different biases that are applied to the different extrinsics:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Extrinsic"),(0,o.kt)("th",{parentName:"tr",align:null},"Vote Bias"),(0,o.kt)("th",{parentName:"tr",align:null},"Low turnout behavior"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"externalPropose")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"no")," bias"),(0,o.kt)("td",{parentName:"tr",align:null},"always simple ",(0,o.kt)("inlineCode",{parentName:"td"},"50% + 1"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"public proposal"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"positive")," turnout bias"),(0,o.kt)("td",{parentName:"tr",align:null},"threshold to pass starts ",(0,o.kt)("inlineCode",{parentName:"td"},"high"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"externalProposeMajority")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"positive")," turnout bias"),(0,o.kt)("td",{parentName:"tr",align:null},"threshold to pass starts ",(0,o.kt)("inlineCode",{parentName:"td"},"high"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"externalProposeDefault")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"negative")," turnout bias"),(0,o.kt)("td",{parentName:"tr",align:null},"threshold to pass starts ",(0,o.kt)("inlineCode",{parentName:"td"},"low"))))),(0,o.kt)("p",null,"Let's consider an example of an external proposal generated by ",(0,o.kt)("inlineCode",{parentName:"p"},"democracy.externalProposeDefault()"),".\nConsulting the table above we see that this extrinsic has a negative turnout bias applied.\nIn other words, the threshold for passing starts low and increases as turnout increases.\nFor example, at ",(0,o.kt)("inlineCode",{parentName:"p"},"25%")," turnout it needs ",(0,o.kt)("inlineCode",{parentName:"p"},"34%")," ayes to pass, at ",(0,o.kt)("inlineCode",{parentName:"p"},"75%")," turnout it needs ",(0,o.kt)("inlineCode",{parentName:"p"},"46%")," ayes to pass.\nAs turnout increases, it becomes harder to pass approaching simple-majority of ",(0,o.kt)("inlineCode",{parentName:"p"},"50% + 1")," of the turnout."),(0,o.kt)("p",null,"During the Voting Period the Technical Committee can fast-track external proposals created using\nthe ",(0,o.kt)("inlineCode",{parentName:"p"},"democracy.externalPropose()")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"democracy.externalProposeDefault()")," extrinsics.\nThe Council also has the ability to cancel a referendum."),(0,o.kt)("h2",{id:"enactment-phase"},"Enactment Phase"),(0,o.kt)("p",null,"Once a referendum passes, the chain automatically implements the referendum code\nusing the ",(0,o.kt)("inlineCode",{parentName:"p"},"pallet_scheduler"),". There's a delay before the implementation starts so that\nstake holders can prepare for the change."),(0,o.kt)("p",null,"As with the previous periods, the Technical Committee can fast-track the delay on\nexternal proposals created using the ",(0,o.kt)("inlineCode",{parentName:"p"},"democracy.externalPropose()")," or\n",(0,o.kt)("inlineCode",{parentName:"p"},"democracy.externalProposeDefault()"),"."),(0,o.kt)("h2",{id:"the-treasury"},"The Treasury"),(0,o.kt)("p",null,"The Treasury is a reserve of tokens that is controlled by the Council and\nused to fund community projects. The goal of the Treasury is to have a source of funds\nthat can incentivize projects on the network. Anyone can submit a treasury\nspend proposal with a ",(0,o.kt)("inlineCode",{parentName:"p"},"1%")," deposit of the total spend amount, and the proposal\nwill be approved or denied by the council. "),(0,o.kt)("p",null,"The funds in the treasury are collected through:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Transaction fees"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"100%")," of on-chain transaction fees are transferred to the Treasury."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Treasury slashing"),": when a treasury spend proposal doesn't pass, the\ndeposit amount (",(0,o.kt)("inlineCode",{parentName:"li"},"1%"),' of the total proposed amount) is "slashed", which means\nthat it is transferred to the Treasury. '),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Democracy slashing"),": when any democracy proposal is canceled the\npreimage deposit fee is transferred to the Treasury instead of being returned.")),(0,o.kt)("h2",{id:"api-reference"},"API Reference"),(0,o.kt)("p",null,"The naming of functions here follows the Substrate invocation method, ",(0,o.kt)("inlineCode",{parentName:"p"},"[pallet].[extrinsic]"),"."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Extrinsic"),(0,o.kt)("th",{parentName:"tr",align:null},"Who can invoke"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"democracy.propose(preImageHash)")),(0,o.kt)("td",{parentName:"tr",align:null},"Public Token Holders")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"democracy.externalPropose(preImageHash)")),(0,o.kt)("td",{parentName:"tr",align:null},"Council")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"democracy.externalProposeDefault(preImageHash)")),(0,o.kt)("td",{parentName:"tr",align:null},"Council")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"democracy.externalProposeMajority(preImageHash)")),(0,o.kt)("td",{parentName:"tr",align:null},"Council")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"democracy.emergencyCancel(index)")),(0,o.kt)("td",{parentName:"tr",align:null},"Technical Committee")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"democracy.fastTrack(proposalHash)")),(0,o.kt)("td",{parentName:"tr",align:null},"Technical Committee")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"democracy.vetoExternal(proposalHash)")),(0,o.kt)("td",{parentName:"tr",align:null},"Technical Committee")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"democracy.cancelProposal(index)")),(0,o.kt)("td",{parentName:"tr",align:null},"Technical Committee")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"treasury.approveSpend(index)")),(0,o.kt)("td",{parentName:"tr",align:null},"Council")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"treasury.rejectSpend(index)")),(0,o.kt)("td",{parentName:"tr",align:null},"Council")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"treasury.proposeSpend()")),(0,o.kt)("td",{parentName:"tr",align:null},"Treasury")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"councilMembership.add()")),(0,o.kt)("td",{parentName:"tr",align:null},"Council")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"councilMembership.remove()")),(0,o.kt)("td",{parentName:"tr",align:null},"Council")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"councilMembership.swap()")),(0,o.kt)("td",{parentName:"tr",align:null},"Council")))))}m.isMDXComponent=!0}}]);