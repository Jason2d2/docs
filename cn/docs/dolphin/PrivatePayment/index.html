<!doctype html>
<html class="docs-version-current" lang="cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">🤿 隐私支付 | Manta Network Technical Resources</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.manta.network/cn/docs/dolphin/PrivatePayment"><meta data-react-helmet="true" name="docusaurus_locale" content="cn"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="🤿 隐私支付 | Manta Network Technical Resources"><meta data-react-helmet="true" name="description" content="Manta 的愿景是为更广泛的区块链行业带来隐私保护，而让隐私变成现实中的应用一个很重要的部分就是构建简单实用的产品。我们早期构建的两个产品之一是 隐私支付_* 更具体地讲, 一个多资产去中心化匿名支付协议_。*"><meta data-react-helmet="true" property="og:description" content="Manta 的愿景是为更广泛的区块链行业带来隐私保护，而让隐私变成现实中的应用一个很重要的部分就是构建简单实用的产品。我们早期构建的两个产品之一是 隐私支付_* 更具体地讲, 一个多资产去中心化匿名支付协议_。*"><link data-react-helmet="true" rel="icon" href="/cn/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.manta.network/cn/docs/dolphin/PrivatePayment"><link data-react-helmet="true" rel="alternate" href="https://docs.manta.network/docs/dolphin/PrivatePayment" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.manta.network/cn/docs/dolphin/PrivatePayment" hreflang="cn"><link data-react-helmet="true" rel="alternate" href="https://docs.manta.network/docs/dolphin/PrivatePayment" hreflang="x-default"><link rel="stylesheet" href="/cn/assets/css/styles.d71edf38.css">
<link rel="preload" href="/cn/assets/js/runtime~main.20d0b31e.js" as="script">
<link rel="preload" href="/cn/assets/js/main.afc080ad.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cn/"><div class="navbar__logo"><img src="/cn/img/manta2.png" alt="Manta Network Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/cn/img/manta2.png" alt="Manta Network Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Manta Network 官方文档</b></a><a href="https://manta.network" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Manta Network<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Manta-Network" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>中文</span></span></a><ul class="dropdown__menu"><li><a href="/docs/dolphin/PrivatePayment" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/cn/docs/dolphin/PrivatePayment" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/docs/Introduction">介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cn/docs/manta/Overview">Manta</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cn/docs/calamari/Overview">Calamari (Manta 先行网)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/calamari/Overview">📝 概览</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/calamari/KMA">🐙 Calamari 代币 KMA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/calamari/Governance">🎙  治理概览</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/calamari/api">🛠  Calamari API 接口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/calamari/CrowdloanClaim">🎟  众贷奖励代币解锁</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/cn/docs/dolphin/Overview">Dolphin</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/dolphin/Overview">📝 概览</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/dolphin/DolphinPay">🐬 DolphinPay</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cn/docs/dolphin/PrivatePayment">🤿 隐私支付</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/dolphin/PrivateExchange">💱 隐私交易</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cn/docs/signer/Overview">Signer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cn/docs/collator/CommunityCollatorProgram">Collator 节点</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/collator/CommunityCollatorProgram">🧩  社区节点计划</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/collator/HowToApply">👩🏼‍💻 如何申请运行 Calamari 节点？</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/collator/SetupAndRun">🚄 安装并运行 Calamari 节点</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/collator/HowToLeave">💔 退出节点计划</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cn/docs/education/ZkpChallenge">Learn About Zero-Knowledge Proofs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/education/ZkpChallenge">Manta Zero Knowledge Proof Challenge</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">本页</button></div><div class="theme-doc-markdown markdown"><h1>🤿 隐私支付</h1><p>Manta 的愿景是为更广泛的区块链行业带来隐私保护，而让隐私变成现实中的应用一个很重要的部分就是构建简单实用的产品。我们早期构建的两个产品之一是 <em><em>隐私支付</em></em> 更具体地讲, <em><em>一个多资产去中心化匿名支付协议</em>。</em></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="工作原理">工作原理<a class="hash-link" href="#工作原理" title="直接链接到标题">​</a></h2><p>我们近期发布了一期详细介绍隐私支付协议的视频:</p><p><a href="https://www.youtube.com/watch?v=qmRChiIDl2A" target="_blank" rel="noopener noreferrer"><img alt="Tech Talk #1" src="/cn/assets/images/tech-talk-1-thumbnail-457f40c14eb340721388e01fc930843d.jpg" width="480" height="360"></a></p><p>你可以点击观看 <a href="https://www.youtube.com/watch?v=qmRChiIDl2A" target="_blank" rel="noopener noreferrer">视频</a>, <a target="_blank" href="/cn/assets/files/tech-talk-1-slides-0bc43c21fe7f5dc28dfa4848534a37e0.pdf">下载ppt</a>, 或者继续阅读接下来的内容，了解更多关于 <em><em>隐私支付</em></em> 的工作原理。</p><p>目前， <em><em>隐私支付</em></em> 的 formal specification 尚未开源, 敬请期待我们在不久未来的发布!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="公共帐本">公共帐本<a class="hash-link" href="#公共帐本" title="直接链接到标题">​</a></h2><p>大多数加密货币的去中心化系统使用 <em><em>公共账本</em></em> 来追踪资产的去向。 公共账本存储每位用户余额的当前状态，一旦他们想要花费账户的余额，区块链会就这笔转账是否有效达成共识，继而更新账户状态。然而，想要验证公共账本上的一笔交易需要知道发送者和接受者以及转账的金额信息。我们希望找到一种方式来避免这种信息泄露，保护交易参与者的信息，并隐藏金额。 </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="去中心化匿名支付协议的特性">去中心化匿名支付协议的特性<a class="hash-link" href="#去中心化匿名支付协议的特性" title="直接链接到标题">​</a></h2><p>在设计一个 <em><em>隐私账本</em>的时候，我们希望它可以具有以下特征：</em></p><ol><li><p>一笔交易不能改变一种资产的总供应量。只有未来能够花费资产的 <em><em>所有权</em></em>会改变<em>。</em></p></li><li><p>账本读取不会泄漏交易或者现有用户的任何信息。</p></li></ol><p>这两种特性看似互相矛盾，一方面我们希望验证某种资产总量保持不变，另一方面我们又不希望获取到交易的具体信息。</p><p>幸运的是，一些密码学协议找到了解决办法—— zkSNARKs, <em><em>简洁非交互式零知识证明</em></em>. 我们之后会看到它们在隐私支付协议中起到了什么样的作用。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="概览">概览<a class="hash-link" href="#概览" title="直接链接到标题">​</a></h2><p>我们会先描述一个相对简化的协议版本，假设有两个任务<code>Alice</code> 和 <code>Bob</code>, 我们希望能找到一种方法让<code>Alice</code> 用一个隐私 <code>账本</code>发送资产给 <code>Bob</code> 。我们会按照接下来的几个步骤来进行演示：</p><ol><li><p><a href="#send-and-receive">发送和接收</a></p></li><li><p><a href="#shared-secrets">共享密钥</a></p></li><li><p><a href="#encrypt-and-decrypt">加密和解密</a></p></li><li><p><a href="#ownership-certificates">所有权证书</a></p></li><li><p><a href="#zero-knowledge-transfer-proof">零知识转账证明</a></p></li></ol><p>这个讨论并没有完整独立地描述整个协议，我们将尝试通过黑盒的方式来解释一些密码学的协议的接口和安全性保障。建议大家对以下的每个话题都进行更深入的了解。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="参与者-详细">参与者 (详细)<a class="hash-link" href="#参与者-详细" title="直接链接到标题">​</a></h3><ul><li><code>Alice</code> (<em><em>发送者</em></em>): 已经获得了某种资产的所有权， 由 <code>账本</code> 保证她可以花费。</li><li><code>Bob</code> (<em><em>接收者</em></em>): 可以被其他 <em><em>发送者</em>识别，</em>未来可以花费所接受到的资产 。</li><li>`账本: 代表所有公开信息 ( <em><em>状态</em></em>) 和验证者网络 (<em><em>区块链</em></em>) ，验证者可以就 <em><em>发送者</em>和</em> <em><em>接收者</em></em>之间发生的隐私转账中的所有权转移达成共识<em>。</em></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="发送和接收">发送和接收<a class="hash-link" href="#发送和接收" title="直接链接到标题">​</a></h2><p>当<code>Alice</code> 想要转账给 <code>Bob</code>, 她使用 <code>账本</code> 作为中介。<code>账本</code> 进行 <em><em>异步处理</em></em> 并被传播于整个网络。因此，很多计算机都可以获取 <code>账本</code>，并向整个网络发送信息或者从整个网络获取信息。 <code>Alice</code>会向<code>账本</code>发送一条转账信息，如果被接收，将在 <code>账本</code>中更新状态, 变动会向全网进行广播。 <code>Bob</code> 会向网络请求最新的状态。如果有新的<code>账本</code>状态，他将下载并分析是否收到了新的资产，以下为两个协议的详情:</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="发送">发送<a class="hash-link" href="#发送" title="直接链接到标题">​</a></h3><p><code>Alice</code> 一开始需要构建一个特殊的数字叫作<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">E</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, <em><em>临时密钥</em></em>, 可以用来代表本次独有的转账。这个是通过 <code>Bob</code>的 <em><em>公钥</em></em>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{PK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, 以及<code>账本</code> 中一部分公开数据，还有一些随机数来构建的:</p><p><img alt="Send Protocol" src="/cn/assets/images/send-protocol-0937b21715f6aadaaafe02d103c19684.png" width="1668" height="1044"></p><p><em><em>承诺方案（commitment scheme）</em> 通过</em> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{PK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 将 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.1132em">τ</span></span></span></span></span> 作为其随机数（A.K.A blinder，trapdoor）确保 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord">Λ</span></span></span></span></span>（账本检查点）隐私安全：</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">E</mtext></msub><mo>:</mo><mo>=</mo><mtext mathvariant="sans-serif">COM</mtext><mo stretchy="false">(</mo><mi mathvariant="normal">Λ</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">B</mtext></msub><mo separator="true">,</mo><mi>τ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{E} := \textsf{COM}(\Lambda || \textsf{PK}_\textsf{B}, \tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textsf">COM</span></span><span class="mopen">(</span><span class="mord">Λ</span><span class="mord">∣</span><span class="mord">∣</span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:0.1132em">τ</span><span class="mclose">)</span></span></span></span></span></div><p>临时密钥只会用一次。 <code>Alice</code> 之后需要证明她正确地构建了<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">E</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, 也叫 <em><em>开启</em></em> 了承诺。承诺被<em><em>绑定</em>意味着</em> <code>Alice</code> 不能改变主意，找到另外一个公钥或账本检查点来构建同样的临时密钥。Trapdoor <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.1132em">τ</span></span></span></span></span> 给予我们 <em><em>可隐藏</em></em>的特性，即便有人知道 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord">Λ</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{PK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> ，他们也不能在不知道<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.1132em">τ</span></span></span></span></span>的情况下预测 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">E</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 是什么。</p><p><code>Alice</code> 现在使用临时密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">E</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, 她自己的密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">A</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, 以及之前她从<code>账本</code> 所收到的资产，来构建一笔<em><em>隐私资产</em>。</em>我们接下来来看下隐私资产具体是如何构造的。 </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="接收">接收<a class="hash-link" href="#接收" title="直接链接到标题">​</a></h3><p>一旦<code>Alice</code> 完成了与<code>账本</code> 之间的通讯，<code>账本</code>接受了她的隐私资产，将会永久地储存隐私资产，并等待有人来领取。<code>Bob</code> 希望来领取，于是他向 <code>账本</code> 请求了所有最新的隐私资产。<code>账本</code> 将这些信息发送给<code>Bob</code> ，他可以用他的密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 来对隐私资产进行扫描，找到属于他的那笔。</p><p><img alt="Receive Protocol" src="/cn/assets/images/receive-protocol-2f444aaf0bc87b227c767412b3c66ef4.png" width="1664" height="924"></p><p> <code>Bob</code> 在扫描过程中使用的密钥必须是从<code>Alice</code>构建隐私资产所用的公钥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{PK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>所<em><em>派生出来的</em>。</em> 这个 <em><em>密钥派生</em></em> 的过程必须是不可逆的，这样就没人可以发现 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 是来自于 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{PK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>的知识。</p><ul><li><strong><em>请注意</em></strong>: 因为 <code>账本</code> 会存在相当长的一段时间，<code>Bob</code> 可以等到任何想要领取的时候操作。</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="共享密钥">共享密钥<a class="hash-link" href="#共享密钥" title="直接链接到标题">​</a></h2><p>可 <code>Bob</code>怎么领取他的新资产？未来他如何花费这些资产？</p><p>我们可以用到的一个很重要的密码学工具是 <em><em>共享密钥</em>。</em>本质上，我们向要找到一种方法来将信息包裹起来，只有两个人有解开的方法。 让某个人保守秘密是很容易的，只要他们不告诉其他人就可以了。但是如何才能将机密告诉另外一个人，而且只有你们两个人知道呢？</p><p>最常见的方法之一是使用 <em><em>Diffie-Hellman Key Exchange</em></em> 协议。 在这个协议中，我们采取了一个假设不可能逆转的操作（在有效时间内），我们称之为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">bind</mtext></mrow><annotation encoding="application/x-tex">\textsf{bind}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">bind</span></span></span></span></span></span>，以及一个所有人都同意的公共常量 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal">G</span></span></span></span></span>。 我们令 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">bind</mtext></mrow><annotation encoding="application/x-tex">\textsf{bind}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">bind</span></span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal">G</span></span></span></span></span> 具有以下属性：</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext mathvariant="sans-serif">bind</mtext><mo stretchy="false">(</mo><mi>y</mi><mo separator="true">,</mo><mtext mathvariant="sans-serif">bind</mtext><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>G</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mtext mathvariant="sans-serif">bind</mtext><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mtext mathvariant="sans-serif">bind</mtext><mo stretchy="false">(</mo><mi>y</mi><mo separator="true">,</mo><mi>G</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\textsf{bind}(y, \textsf{bind}(x, G)) = \textsf{bind}(x, \textsf{bind}(y, G))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textsf">bind</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord text"><span class="mord textsf">bind</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">G</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textsf">bind</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord text"><span class="mord textsf">bind</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">G</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></div><p>我们通过<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">x</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span> 密钥并调用 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>:</mo><mo>=</mo><mtext mathvariant="sans-serif">bind</mtext><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X := \textsf{bind}(x, G)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textsf">bind</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">G</span><span class="mclose">)</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mo>:</mo><mo>=</mo><mtext mathvariant="sans-serif">bind</mtext><mo stretchy="false">(</mo><mi>y</mi><mo separator="true">,</mo><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Y := \textsf{bind}(y, G)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textsf">bind</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">G</span><span class="mclose">)</span></span></span></span></span> 方法生成公钥。 由于 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">bind</mtext></mrow><annotation encoding="application/x-tex">\textsf{bind}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">bind</span></span></span></span></span></span> 是不可逆的，我们可以将公钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span> 公开提供给任何人，或者即使我们想要加密，我们仍然可以发送 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span></span></span></span></span> 或 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span> 给特定的人，且不必担心有人可以对我们的密钥进行逆向工程。</p><p>因为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">bind</mtext></mrow><annotation encoding="application/x-tex">\textsf{bind}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">bind</span></span></span></span></span></span> 函数具有上述属性，所以信息加密方法为：</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo>:</mo><mo>=</mo><mtext mathvariant="sans-serif">bind</mtext><mo stretchy="false">(</mo><mi>y</mi><mo separator="true">,</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mtext mathvariant="sans-serif">bind</mtext><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S := \textsf{bind}(y, X) = \textsf{bind}(x, Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textsf">bind</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textsf">bind</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span><span class="mclose">)</span></span></span></span></span></div><p>因此，如果您与某人共享您的公钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span></span></span></span></span> 并获得他们的公钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span>，那么你们俩都可以进行传输加密 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span>。 通过以上方法，<code>Alice</code> 和 <code>Bob</code>成功传输了几条加密信息。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="加密和解密">加密和解密<a class="hash-link" href="#加密和解密" title="直接链接到标题">​</a></h2><p><code>Alice</code> 和 <code>Bob</code>使用 <em>_共享密钥</em> <em>_</em>加密方式的第一个步是共享 <em>_加密</em>公钥 <em>_</em>。 这些密钥用于将我们想要在秘密消息中传输的资产价值从<code>Alice</code> 发送给<code>Bob</code>。 这称为<em><em>线上传递</em></em>。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="加密">加密<a class="hash-link" href="#加密" title="直接链接到标题">​</a></h3><p>为了让<code>Alice</code>将资产发送给<code>Bob</code>，她使用<em><em>混合公钥加密方案</em></em>来<em><em>加密</em></em>资产。 她通过获取<code>Bob</code>的公钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">PK</mtext><mo>∗</mo><mtext mathvariant="sans-serif">B</mtext></mrow><annotation encoding="application/x-tex">\textsf{PK}*\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">PK</span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">B</span></span></span></span></span></span><em> 和此特定交易 </em><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">SK</mtext><mo>∗</mo><mtext mathvariant="sans-serif">E</mtext></mrow><annotation encoding="application/x-tex">\textsf{SK}*\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">SK</span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">E</span></span></span></span></span></span> 的<em><em>临时密钥</em></em> 并执行 Diffie-Hellman 交换（在这种情况下使用椭圆曲线定义 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">bind</mtext></mrow><annotation encoding="application/x-tex">\textsf{bind}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">bind</span></span></span></span></span></span> 函数），以计算共享加密密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span></span></span></span></span>。</p><p><em></em></p><p><img alt="Encryption (Full)" src="/cn/assets/images/encryption-full-dd895ee6cc8129a6ebdb8ac1559ef02c.png" width="1526" height="960"></p><p><code>Alice</code>然后使用 <em><em>Blake2s</em></em>密钥派生函数生成另一个密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">K^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.688696em;vertical-align:0em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span>，<em>这是标准</em><em>AES-GCM</em><em>具有消息身份验证的加密方案的正确方式</em>。<em> <code>Alice</code>使用 </em><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">K^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.688696em;vertical-align:0em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span> 加密资产，并将派生的公共临时密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">E</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{PK}_\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 附加到密文消息中。 这一步骤构成了<code>Alice</code>发送给<code>账本</code>的完整私有资产。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="解密">解密<a class="hash-link" href="#解密" title="直接链接到标题">​</a></h3><p>收到加密资产后，<code>Bob</code>将从<code>账本</code>下载发给他的私有资产，并查看是否有任何新资产是他可以使用的，他将尝试通过<code>Alice</code>的公钥来解密它们。</p><p><em></em></p><p><img alt="Decryption (Full)" src="/cn/assets/images/decryption-full-0c07fd60cd9d18e099d32254a178b2ef.png" width="1436" height="792"></p><p>在这种情况下，<code>Bob</code>使用他的密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">SK</mtext><mo>∗</mo><mtext mathvariant="sans-serif">B</mtext></mrow><annotation encoding="application/x-tex">\textsf{SK}*\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">SK</span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">B</span></span></span></span></span></span><em> 和附加到私有资产的公共临时密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">PKE</mtext></mrow><annotation encoding="application/x-tex">\textsf{PK}\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">PK</span></span><span class="mord text"><span class="mord textsf">E</span></span></span></span></span></span> ，构建 Diffie-Hellman 共享密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span></span></span></span></span>，然后使用相同的 </em><em>Blake2s</em><em> 函数推导出 $K^</em><span class="math math-inline"><span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;$&#x27; in math mode at position 46: …证是否可以正确重建，如果密钥 $̲K^" style="color:#cc0000"><span class="cjk_fallback">，然后执行 _AES-GCM_解密。* 解密将检查消息身份验证是否可以正确重建，如果密钥 $K^</span></span></span> 与用于构建消息的密钥不同，它将失败，并且<code>Bob</code>将知道资产不是他的。 如果加密成功，那么 <code>Bob</code>会获得私有资产。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="确权">确权<a class="hash-link" href="#确权" title="直接链接到标题">​</a></h2><p>现在我们知道<code>Alice</code>如何向<code>Bob</code>发送资产了。 但是，<code>账本</code>必须只接受可以证明发送的资产是<em><em>未来可消费的</em></em> ，同时保护所有相关方的隐私。 如果仅是<code>Alice</code>向<code>Bob</code>发送加密资产并不意味着她不能再次发送它，或者将它发送给其他人。 我们需要一种方法来跟踪谁拥有什么，并能够在有人花费资产后夺走这种权力。</p><p>为了满足这个约束， <code>Alice</code> 会生成两种证书，<em><em>UTXOs</em></em> 和 <em><em>void numbers</em>。</em></p><p><em><em>UTXO</em></em>或 <em><em>Unspent Transation Output</em></em>是接收者未来可以花费的证书。 它以下列方式在公共账本协议中使用：</p><p>1.证明<code>Alice</code> 拥有当前UTXO</p><p>2.从<code>账本</code>中删除<code>Alice</code>的UTXO</p><p>3.为<code>Bob</code>创建一个新的UTXO</p><p>通过这种方式，当前的 UTXO 集合代表了所有拥有一定数量资产以及他们的用户。 为了让<code>Alice</code> 花费她的资产，她需要出示一个证明<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">CM</mtext><mtext mathvariant="sans-serif">A</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{CM}_\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">CM</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>，它代表<code>Alice</code> 是过去交易的接收者。 她需要证明 <code>账本</code> 以前见过这个 UTXO。</p><p><img alt="Ownership Certificates" src="/cn/assets/images/utxo-explanation-81f1e1c65650d1686fd74bc233ef1b95.png" width="1816" height="934"></p><p>要将资产转移给<code>Bob</code>，<code>Alice</code> 会为<code>Bob</code> 生成一个名为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">CM</mtext><mo>∗</mo><mtext mathvariant="sans-serif">B</mtext></mrow><annotation encoding="application/x-tex">\textsf{CM}*\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">CM</span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">B</span></span></span></span></span></span><em> 的新 UTXO</em>。<em> <code>Alice</code>需要以某种方式撤销她的旧 UTXO</em>。<em> 她通过生成一个  </em><em>void number</em>* <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">VNA</mtext></mrow><annotation encoding="application/x-tex">\textsf{VN}\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">VN</span></span><span class="mord text"><span class="mord textsf">A</span></span></span></span></span></span> 来做到这一点，这与她的 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">CM</mtext><mtext mathvariant="sans-serif">A</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{CM}_\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">CM</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 相关联，其方式如下：</p><p>1.相同的 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">CM</mtext><mo>∗</mo><mtext mathvariant="sans-serif">A</mtext></mrow><annotation encoding="application/x-tex">\textsf{CM}*\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">CM</span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">A</span></span></span></span></span></span><em> 将始终生成相同的 </em><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">VN</mtext><mo>∗</mo><mtext mathvariant="sans-serif">A</mtext></mrow><annotation encoding="application/x-tex">\textsf{VN}*\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">VN</span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">A</span></span></span></span></span></span>。</p><p>2.不同的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">CM</mtext></mrow><annotation encoding="application/x-tex">\textsf{CM}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">CM</span></span></span></span></span></span>生成不同的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">VN</mtext></mrow><annotation encoding="application/x-tex">\textsf{VN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">VN</span></span></span></span></span></span>。</p><p>3.没有人知道 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">VN</mtext><mo>∗</mo><mstyle mathcolor="#cc0000"><mtext>\*</mtext></mstyle><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>s</mi><mi>f</mi><mi>A</mi></mrow><annotation encoding="application/x-tex">\textsf{VN}*\*textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">VN</span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text" style="color:#cc0000"><span class="mord" style="color:#cc0000">\*</span></span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord"><span class="mord mathnormal">A</span></span></span></span></span></span> 属于哪一个 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">CMA</mtext></mrow><annotation encoding="application/x-tex">\textsf{CM}\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">CM</span></span><span class="mord text"><span class="mord textsf">A</span></span></span></span></span></span>。</p><p>4.只有<code>Alice</code>可以构造<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">VN</mtext><mtext mathvariant="sans-serif">A</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{VN}_\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">VN</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>。</p><p>让我们看看 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">CM</mtext></mrow><annotation encoding="application/x-tex">\textsf{CM}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">CM</span></span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">VN</mtext></mrow><annotation encoding="application/x-tex">\textsf{VN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">VN</span></span></span></span></span></span> 是如何构造的。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="接收证书">接收证书<a class="hash-link" href="#接收证书" title="直接链接到标题">​</a></h3><p>为了让<code>Alice</code> 能够以<code>Bob</code>的名义创建 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">CMB</mtext></mrow><annotation encoding="application/x-tex">\textsf{CM}\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">CM</span></span><span class="mord text"><span class="mord textsf">B</span></span></span></span></span></span><em>，</em>她需要计算了另一个共享密钥，称为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">TB</mtext></mrow><annotation encoding="application/x-tex">\textsf{T}\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">T</span></span><span class="mord text"><span class="mord textsf">B</span></span></span></span></span></span> trapdoor， 并到 UTXO 发布 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">CM</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{CM}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">CM</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>承诺证明。</p><p><img alt="Receiver UTXO" src="/cn/assets/images/utxo-construction-b759f8e2b51a64f6059dcb869bff80e3.png" width="1690" height="848"></p><p>承诺是由<code>Alice</code>想要转移的资产数量和trapdoor组成。 trapdoor是保证<em><em>隐藏</em></em>属性的随机部分。 承诺的<em><em>binding</em></em>  属性确保<code>Alice</code>不能将一些虚假信息放入承诺中，防止<code>Bob</code>最终得到一些他无法花费的资产。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="发送方证明">发送方证明<a class="hash-link" href="#发送方证明" title="直接链接到标题">​</a></h3><p>为让<code>Alice</code>生成她的void number证明，需使用她的trapdoor <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">TA</mtext></mrow><annotation encoding="application/x-tex">\textsf{T}\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">T</span></span><span class="mord text"><span class="mord textsf">A</span></span></span></span></span></span>构建<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">CMA</mtext></mrow><annotation encoding="application/x-tex">\textsf{CM}\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">CM</span></span><span class="mord text"><span class="mord textsf">A</span></span></span></span></span></span> ，并提交她的密钥 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">A</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>。</p><p><img alt="Sender UTXO and Void Number" src="/cn/assets/images/void-number-construction-a218df14c837ced48ae3f2bff6192903.png" width="1602" height="1016"></p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="sans-serif">VNA</mtext></mrow><annotation encoding="application/x-tex">\textsf{VN}\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord text"><span class="mord textsf">VN</span></span><span class="mord text"><span class="mord textsf">A</span></span></span></span></span></span> 之所以与void number证明相关，因为它使用相同的 trapdoor，并且只有 <code>Alice</code>可以执行此计算，因为 $\textsf{SK}\textsf{A} $只有她知道。</p><p>为了证明她的 UTXO 已经在<code>账本</code>上，<code>Alice</code> 可以创建一个<em><em>Merkle-Proof</em></em>，<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mtext mathvariant="sans-serif">A</mtext></msub></mrow><annotation encoding="application/x-tex">\pi_\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>，证明这一事实。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="零知识转账证明">零知识转账证明<a class="hash-link" href="#零知识转账证明" title="直接链接到标题">​</a></h2><p>但Alice<code>已经秘密完成了所有这些计算，并涉及大量秘密信息，如果她与任何人分享，这些信息将危及她的账户。</code>账本`怎么能相信她诚实地进行这个计算呢？</p><p><code>Alice</code> 可以利用 zkSNARKs，<em><em>简洁非交互式零知识证明</em></em>在自己的机器上进行完全的运算，zkSNARKs 的工作原理如下：</p><ol><li><p><code>Alice</code> 和 <code>账本</code> 就验证的某种算法公开达成共识，他们共同决定算法中哪些变量是机密的，哪些是可以公开的。</p></li><li><p><code>Alice</code>在自己的机器上，用自己选择的机密和公开输入进行算法运算。</p></li><li><p>使用运算的输出，<code>Alice</code> 构建了一个可以证明运算是正确的<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span>(因为简洁性，相比于算法大小，这只是一个很小的文件）</p></li><li><p><code>Alice</code>将 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> 发送给 <code>账本</code> ， <code>账本</code>可以快速验证是否产生文件的运算就是之前两人达成共识的算法，以决定是否要接受还是拒绝。</p></li></ol><p><img alt="ZKP Details" src="/cn/assets/images/zkp-details-8e5c63bc163926185c971d47a7c881d0.png" width="1272" height="876"></p><p><code>Alice</code> 可以使用 zkSNARKs 来运算以上 <em><em>隐私支付协议</em></em>中不同的 objects。当她在做这些的时候，通过可以获得以下的隐私保证：</p><ol><li><p>*<strong>*隐私发送者**</strong>: 因为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">CM</mtext><mtext mathvariant="sans-serif">A</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{CM}_\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">CM</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mtext mathvariant="sans-serif">A</mtext></msub></mrow><annotation encoding="application/x-tex">\pi_\textsf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 是机密的, <code>账本</code> 并不知道哪个 UTXO 属于 <code>Alice</code>, 知道的只是储存于 <code>账本</code>之中的其中一个。</p></li><li><p>*<strong>*隐私接收者**</strong>: 因为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">E</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> 的构建属于机密, 没有人知道它来自 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{PK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>。</p></li><li><p>*<strong>*隐私资产**</strong>: 因为 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">SK</mtext><mtext mathvariant="sans-serif">E</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{SK}_\textsf{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">SK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="sans-serif">PK</mtext><mtext mathvariant="sans-serif">B</mtext></msub></mrow><annotation encoding="application/x-tex">\textsf{PK}_\textsf{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord textsf">PK</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord textsf mtight">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, 和资产金额都是机密，除了<code>Bob</code> 外，没有人可以对加密的资产进行解密。</p></li></ol><p>这样，我们就成功地构建了一个隐私支付协议！</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="通用的-n-to-m-转账协议">通用的 N-to-M 转账协议<a class="hash-link" href="#通用的-n-to-m-转账协议" title="直接链接到标题">​</a></h2><p>一般来说, 如果想要拥有可用的钱，我们需要的不仅仅是一个1对1的转账，比如，如果 <code>Alice</code> 向 <code>Bob</code> 转了5个（代币），而<code>Bob</code>想向<code>Carol</code> 转3个, 他不能使用1对1，因为并不能分割资产。想要解决这一问题，我们将以上的协议类推到一个<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span></span>-to-<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span></span></span></span>协议。</p><p><img alt="Generalized Protocol" src="/cn/assets/images/generalized-protocol-b830030b406a763569e33ad7f62f817f.png" width="1448" height="990"></p><p>我们可以为每个 <em><em>发送者</em></em> and <em><em>接收者</em></em> 重复这一构建，这样 <code>Bob</code> 就可以将他的3个（代币）发送给 <code>Carol</code> 并将2个发给自己。因为整个协议是隐私的，除了<code>Bob</code> ，没有人知道他是这样做的。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="了解更多">了解更多<a class="hash-link" href="#了解更多" title="直接链接到标题">​</a></h2><p>想要构建一个真正的隐私支付体系，你还需要了解更多的细节，比如隐私钱包、费用代理等等。目前，这些想法还在构想中，但是很快会有一些很酷的东西，敬请期待！</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Manta-Network/docs/edit/main/docs/dolphin/PrivatePayment.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑本页面</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档页面导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cn/docs/dolphin/DolphinPay"><div class="pagination-nav__sublabel">上一篇</div><div class="pagination-nav__label">🐬 DolphinPay</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cn/docs/dolphin/PrivateExchange"><div class="pagination-nav__sublabel">下一篇</div><div class="pagination-nav__label">💱 隐私交易</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#工作原理" class="table-of-contents__link toc-highlight">工作原理</a></li><li><a href="#公共帐本" class="table-of-contents__link toc-highlight">公共帐本</a></li><li><a href="#去中心化匿名支付协议的特性" class="table-of-contents__link toc-highlight">去中心化匿名支付协议的特性</a></li><li><a href="#概览" class="table-of-contents__link toc-highlight">概览</a><ul><li><a href="#参与者-详细" class="table-of-contents__link toc-highlight">参与者 (详细)</a></li></ul></li><li><a href="#发送和接收" class="table-of-contents__link toc-highlight">发送和接收</a><ul><li><a href="#发送" class="table-of-contents__link toc-highlight">发送</a></li><li><a href="#接收" class="table-of-contents__link toc-highlight">接收</a></li></ul></li><li><a href="#共享密钥" class="table-of-contents__link toc-highlight">共享密钥</a></li><li><a href="#加密和解密" class="table-of-contents__link toc-highlight">加密和解密</a><ul><li><a href="#加密" class="table-of-contents__link toc-highlight">加密</a></li><li><a href="#解密" class="table-of-contents__link toc-highlight">解密</a></li></ul></li><li><a href="#确权" class="table-of-contents__link toc-highlight">确权</a><ul><li><a href="#接收证书" class="table-of-contents__link toc-highlight">接收证书</a></li><li><a href="#发送方证明" class="table-of-contents__link toc-highlight">发送方证明</a></li></ul></li><li><a href="#零知识转账证明" class="table-of-contents__link toc-highlight">零知识转账证明</a></li><li><a href="#通用的-n-to-m-转账协议" class="table-of-contents__link toc-highlight">通用的 N-to-M 转账协议</a></li><li><a href="#了解更多" class="table-of-contents__link toc-highlight">了解更多</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cn/docs/Introduction">介绍</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/manta/Overview">Manta 概览</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/calamari/Overview">Calamari 概览</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/mantanetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/mantanetworkofficial" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/MnaM4mqq" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多的</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Manta-Network" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="mailto:contact@manta.network" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">版权 © 2019-2022 Manta Network.</div></div></div></footer></div>
<script src="/cn/assets/js/runtime~main.20d0b31e.js"></script>
<script src="/cn/assets/js/main.afc080ad.js"></script>
</body>
</html>